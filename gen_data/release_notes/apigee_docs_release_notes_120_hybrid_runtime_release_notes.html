<article class="devsite-article">
 <article class="devsite-article-inner">
  <div background="teal" class="devsite-banner devsite-banner-announcement">
   <div class="devsite-banner-message">
    <div class="devsite-banner-message-text">
     <p>
      <strong>
       NOTE:
      </strong>
      Some aspects of this product are in Beta. The hybrid installation options are GA. To join the Beta program, reach out to your Apigee representative.
     </p>
    </div>
   </div>
  </div>
  <h1 class="devsite-page-title">
   1.2.0 - Apigee hybrid runtime release notes
  </h1>
  <devsite-toc class="devsite-nav" devsite-toc-embedded="">
  </devsite-toc>
  <div class="devsite-article-body clearfix">
   <p>
    On April 3, 2020, we released Apigee hybrid runtime version 1.2.0.
   </p>
   <aside class="objective">
    For more information, see the following resources:
    <ul>
     <li>
      <em>
       <a href="/apigee/docs/hybrid/v1.2/what-is-hybrid">
        Learn more about hybrid
       </a>
      </em>
      or
      <em>
       <a href="/apigee/docs/hybrid/v1.2/big-picture">
        Start installing
       </a>
      </em>
     </li>
     <li>
      <em>
       Create a paid account:
      </em>
      Contact
      <a href="https://pages.apigee.com/contact-sales-reg.html">
       Apigee Sales
      </a>
     </li>
     <li>
      <em>
       Questions or issues?
      </em>
      Contact
      <a class="external" href="https://cloud.google.com/apigee/support/">
       Apigee Support
      </a>
     </li>
    </ul>
   </aside>
   <section class="expandable">
    <h4 class="showalways" data-text="Help &amp; notifications" id="help-notifications" tabindex="0">
     Help &amp; notifications
    </h4>
    <div class="note">
     <p>
      <strong>
       Private Cloud customers
      </strong>
      : Is this cloud release included in your Private Cloud
  version? See your version's release notes to see which cloud releases it contains. Also, see
      <a href="/apigee/docs/release/apigee-edge-release-process#aboutreleasenumbering">
       About release numbering
      </a>
      to understand how you can figure it out by comparing release numbers.
     </p>
     <p>
      <strong>
       Questions or issues?
      </strong>
      <a href="https://cloud.google.com/apigee/support/">
       Get help here
      </a>
      .
     </p>
     <p>
      <strong>
       Release notifications
      </strong>
      : Go to
      <a href="http://status.apigee.com">
       http://status.apigee.com
      </a>
      and click
      <strong>
       Subscribe to Updates
      </strong>
      .
     </p>
     <p>
      <a href="/apigee/docs/release/notes/apigee-release-notes">
       Release notes home page
      </a>
     </p>
    </div>
   </section>
   <h2 data-text="Upgrading" id="upgrading" tabindex="0">
    Upgrading
   </h2>
   <aside class="warning">
    To upgrade from version 1.1.1 to 1.2.0, you must make changes in your
  overrides file that are incompatible with version 1.1.1. Making these changes to your overrides
 file is a prerequisite to performing the upgrade. The new configuration corrects a problem
  where in some cases API calls were routed to the wrong environment.
  For details, see
    <a href="/apigee/docs/hybrid/v1.2/upgrade">
     Upgrading Apigee hybrid
    </a>
    .
   </aside>
   <h2 data-text="New features and updates" id="new-features-and-updates" tabindex="0">
    New features and updates
   </h2>
   <p>
    Following are the new features and updates in this release.
   </p>
   <h3 data-text="A new virtual host configuration was added to specify routing rules" id="a-new-virtual-host-configuration-was-added-to-specify-routing-rules" tabindex="0">
    A new virtual host configuration was added to specify routing rules
   </h3>
   <p>
    The new
    <code dir="ltr" translate="no">
     virtualhosts
    </code>
    configuration feature addresses an issue
    where the order in which base paths were routed to multiple environments was
    uncertain. For details, see
    <a href="/apigee/docs/hybrid/v1.2/base-path-routing">
     Configure virtual hosts
    </a>
    . (150336519)
   </p>
   <h3 data-text="Beta release of the OASValidation policy" id="beta-release-of-the-oasvalidation-policy" tabindex="0">
    Beta release of the OASValidation policy
   </h3>
   <p>
    The OASValidation (OpenAPI Specification Validation) policy (Beta) enables you to validate an
  incoming request or response message against an OpenAPI 3.0 Specification (JSON or YAML).
  For more information, see
    <a href="/apigee/docs/api-platform/reference/policies/oas-validation-policy">
     OASValidation
  policy (Beta)
    </a>
    . (144949685)
   </p>
   <h3 data-text="
  Beta release of WebSocket support
" id="beta-release-of-websocket-support" tabindex="0">
    Beta release of WebSocket support
   </h3>
   <p>
    Apigee hybrid supports WebSocket connections. API proxy clients can now request a protocol upgrade
  from HTTP to WebSockets.
  For details, see
    <a href="/apigee/docs/hybrid/v1.2/websockets">
     Using WebSockets (Beta)
    </a>
    .
   </p>
   <h3 data-text="Accessing policy secret values from Kubernetes secrets" id="accessing-policy-secret-values-from-kubernetes-secrets" tabindex="0">
    Accessing policy secret values from Kubernetes secrets
   </h3>
   <p>
    A new feature lets you access values stored in a Kubernetes secret in proxy flow variables.
    For details, see
    <a href="/apigee/docs/hybrid/v1.2/k8s-secrets">
     Storing data in a Kubernetes secret
    </a>
    .
    (133377603)
   </p>
   <h3 data-text="Apigee Operators (AO) element replaces ADAC and ADAH" id="ao" tabindex="0">
    Apigee Operators (AO) element replaces ADAC and ADAH
   </h3>
   <p>
    Apigee Operators (AO) Creates and updates low level Kubernetes and Istio resources that are required
  to deploy and maintain the AD. For example, the controller carries out the release of message
  processors. Also validates the ApigeeDeployment configuration before persisting it in Kubernetes
  cluster. AO replaces Apigee Deployment Admissionhook (ADAH) and Apigee Deployment Controller (ADC).
  See
    <a href="/apigee/docs/hybrid/v1.2/config-prop-ref#ao">
     ao in the Configuration property reference
    </a>
    .
  (151250559)
   </p>
   <h3 data-text="Replace and deprecate certain cluster and project configuration properties" id="replace-and-deprecate-certain-cluster-and-project-configuration-properties" tabindex="0">
    Replace and deprecate certain cluster and project configuration properties
   </h3>
   <p>
    Two new configuration properties were added:
    <code dir="ltr" translate="no">
     k8sCluster
    </code>
    and
    <code dir="ltr" translate="no">
     gcp
    </code>
    .
   These properties replace the following deprecated properties:
    <code dir="ltr" translate="no">
     k8sClusterName
    </code>
    ,
    <code dir="ltr" translate="no">
     gcpRegion
    </code>
    , and
    <code dir="ltr" translate="no">
     gcpProjectID
    </code>
    . For details,
  see
    <a href="/apigee/docs/hybrid/v1.2/config-prop-ref">
     Configuration property reference
    </a>
    . (146299599)
   </p>
   <h3 data-text="Persistent Volume expansion for Cassandra on Kubernetes" id="persistent-volume-expansion-for-cassandra-on-kubernetes" tabindex="0">
    Persistent Volume expansion for Cassandra on Kubernetes
   </h3>
   <p>
    A process was added to expand the persistent volume used by apigee-cassandra to accommodate the
    storage needs, without needing to add more nodes just to increase storage. See
    <a href="/apigee/docs/hybrid/v1.2/expand-persistent-volumes">
     Expand Cassandra persistent volumes
    </a>
    . (138167919)
   </p>
   <h3 data-text="Support additional sources for certs, encryption keys and SAs" id="support-additional-sources-for-certs,-encryption-keys-and-sas" tabindex="0">
    Support additional sources for certs, encryption keys and SAs
   </h3>
   <p>
    New configuration properties were added that provide greater flexibility in the way
    you specify TLS certificates, encryption keys, and service account keys. The new properties
    are listed below:
   </p>
   <ul>
    <li>
     <code dir="ltr" translate="no">
      kmsEncryptionPath
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      kmsEncryptionSecret.key
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      kmsEncryptionSecret.name
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      cassandra.backup.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      cassandra.restore.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].cacheEncryptionPath
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].cacheEncryptionSecret.key
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].cacheEncryptionSecret.name
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].kmsEncryptionPath
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].kmsEncryptionSecret.key
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].kmsEncryptionSecret.name
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].serviceAccountSecretRefs.synchronizer
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].serviceAccountSecretRefs.udca
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].sslSecret
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      logger.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      mart.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      mart.sslSecret
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      metrics.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      synchronizer.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      udca.serviceAccountSecretRef
     </code>
    </li>
   </ul>
   <p>
    For more information, see the
    <a href="/apigee/docs/hybrid/v1.2/config-prop-ref">
     Configuration
    properties reference
    </a>
    . (145303466)
   </p>
   <h3 data-text="Allow customers to obfuscate data before sending it to analytics" id="allow-customers-to-obfuscate-data-before-sending-it-to-analytics" tabindex="0">
    Allow customers to obfuscate data before sending it to analytics
   </h3>
   <p>
    A feature was added that allows you to obfuscate certain analytics data before it is sent to
    the management plane. For details, see
    <a href="/apigee/docs/hybrid/v1.2/obfuscate-userdata-for-analytics">
     Obfuscate user data for analytics
    </a>
    . (142578910)
   </p>
   <h3 data-text="Expand persistent volumes for statefulsets" id="expand-persistent-volumes-for-statefulsets" tabindex="0">
    Expand persistent volumes for statefulsets
   </h3>
   <p>
    A feature was added that allows you expand the persistent volume used by apigee-cassandra to
    accommodate the storage needs, without adding more compute power.  For more information, see
    <a href="/apigee/docs/release/notes/hybrid/v1.2/expand-persistent-volumes">
     Expand persistent volumes for statefulsets
    </a>
    .
    (138167919)
   </p>
   <h3 data-text="Minimum supported versions of GKE, Anthos, and AKS are upgraded" id="minimum-supported-versions-of-gke,-anthos,-and-aks-are-upgraded" tabindex="0">
    Minimum supported versions of GKE, Anthos, and AKS are upgraded
   </h3>
   <p>
    Apigee hybrid now supports GKE 1.14.x, Anthos 1.2, and AKS 1.14.x. (149578101)
   </p>
   <h3 data-text="Support TLS 1.3 for Northbound connections" id="support-tls-1.3-for-northbound-connections" tabindex="0">
    Support TLS 1.3 for Northbound connections
   </h3>
   <p>
    Two new configuration properties allow you to set the minimum and maximum TLS version for
    the ingress:
    <code dir="ltr" translate="no">
     ingress.minTLSProtocolVersion
    </code>
    and
    <code dir="ltr" translate="no">
     maxTLSProtocolVersion
    </code>
    .
    Possible values are 1.0, 1.1, 1.2 and 1.3. For more information, see
    the
    <a href="/apigee/docs/hybrid/v1.2/config-prop-ref">
     Configuration
    properties reference
    </a>
    . (117580780)
   </p>
   <h3 data-text="Support forward proxy configuration for hybrid runtime" id="support-forward-proxy-configuration-for-hybrid-runtime" tabindex="0">
    Support forward proxy configuration for hybrid runtime
   </h3>
   <p>
    HTTP forward proxying is now supported for API proxies deployed to an environment.
    For details, see
    <a href="/apigee/docs/hybrid/v1.2/forward-proxy">
     Configure forward proxying
    </a>
    . (148970527)
   </p>
   <h3 data-text="Support multiple hostAliases per environment" id="support-multiple-hostaliases-per-environment" tabindex="0">
    Support multiple hostAliases per environment
   </h3>
   <p>
    A new configuration property,
    <code dir="ltr" translate="no">
     envs[].hostAliases
    </code>
    , has been added. This
    property lets you add multiple host aliases to an environment. Use this element instead of
    <code dir="ltr" translate="no">
     hostAlias
    </code>
    , which has been deprecated. For details, see
    <a href="/apigee/docs/hybrid/v1.2/environment-create#adding-multiple-host-aliases-to-an-environment">
     Adding
      multiple host aliases to an environment
    </a>
    . (150738495)
   </p>
   <h3 data-text="Allow templates for property sets" id="allow-templates-for-property-sets" tabindex="0">
    Allow templates for property sets
   </h3>
   <p>
    A new element &lt;PropertySetRef&gt; was added to the &lt;AssignVariable&gt; element of the &lt;AssignMessage&gt;
         policy. &lt;PropertySetRef&gt; allows you to create a property set name/key pair dynamically.
         This feature is only available for API proxies deployed to Apigee hybrid. See
    <a href="/apigee/docs/api-platform/reference/policies/assign-message-policy#assignvariable">
     AssignVariable
    </a>
    . (148612340)
   </p>
   <h2 data-text="Bugs fixed" id="bugs-fixed" tabindex="0">
    Bugs fixed
   </h2>
   <p>
    The following bugs are fixed in this release. This list is primarily for users checking
         to see if their support tickets have been fixed. It's not designed to provide detailed
         information for all users.
   </p>
   <table class="table" summary="Bugs fixed in this release">
    <thead>
     <tr>
      <th>
       Issue ID
      </th>
      <th>
       Component Name
      </th>
      <th>
       Description
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       147958049
      </td>
      <td>
       Runtime
      </td>
      <td>
       A timing issue in runtime startup sequencing was addressed that sometimes prevented
                  the synchronizer from starting up properly.
      </td>
     </tr>
     <tr>
      <td>
       149867244
      </td>
      <td>
       K8S Platform
      </td>
      <td>
       apigee-cps-setup pod failing in multi-region setup
      </td>
     </tr>
     <tr>
      <td>
       150187652 / 149117839
      </td>
      <td>
       Runtime
      </td>
      <td>
       Could not use hyphens in environment names.
      </td>
     </tr>
     <tr>
      <td>
       149220463
      </td>
      <td>
       MP pod
      </td>
      <td>
       Previously deployed proxies needed to be re-deployed.
      </td>
     </tr>
     <tr>
      <td>
       144321144
      </td>
      <td>
       Runtime
      </td>
      <td>
       Proxies with secure virtual hosts could not be reloaded.
      </td>
     </tr>
     <tr>
      <td>
       147685310
      </td>
      <td>
       Runtime
      </td>
      <td>
       Synchronizer initialization failures due to failed GCP token fetch during initialization.
      </td>
     </tr>
     <tr>
      <td>
       151115900
      </td>
      <td>
       Runtime
      </td>
      <td>
       Periodic Internal Probe was not happening for HybridMART resulting in false positive results.
      </td>
     </tr>
    </tbody>
   </table>
   <h2 data-text="
  Known issues
" id="known-issues" tabindex="0">
    Known issues
   </h2>
   <p>
    The following table describes the known issues for this release:
   </p>
   <table class="purple">
    <thead>
     <tr>
      <th width="20%">
       Issue
      </th>
      <th>
       Description
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       N/A
      </td>
      <td>
       <p>
        Invalid HTTP Header error: The Istio ingress switches all incoming target responses
          to the HTTP2 protocol. Because the hybrid message processor only supports HTTP1, you
          may see the following error when an API proxy is called:
       </p>
       <pre class="prettyprint" dir="ltr" translate="no">http2 error: Invalid HTTP header field was received: frame type: 1, stream: 1,
   name: [:authority], value: [domain_name]</pre>
       <p>
        If you see this error, you can take either of the following actions to correct the
          problem:
       </p>
       <ul>
        <li>
         Modify the target service to omit the Host header in the response.
        </li>
        <li>
         Remove the Host header using the AssignMessage policy in your API proxy if
            necessary.
        </li>
       </ul>
      </td>
     </tr>
     <tr>
      <td>
       144584813
      </td>
      <td>
       If you create a debug session but the session does not yet have any transactions in it,
          then the
       <a href="https://cloud.google.com/hybrid/v1.2/reference/apis/rest/v1/organizations.environments.apis.revisions.debugsessions/list">
        List Debug Sessions API
       </a>
       does not include the session in this list. The API only includes
          sessions in the response if the session contains at least one transaction.
      </td>
     </tr>
     <tr>
      <td>
       143659917
      </td>
      <td>
       <p>
        The PopulateCache policy's expiration setting must be set to an explicit value
          between 1 and 30. For example:
       </p>
       <pre class="prettyprint" dir="ltr" translate="no">&lt;ExpirySettings&gt;
  &lt;TimeoutInSec&gt;30&lt;/TimeoutInSec&gt;
&lt;/ExpirySettings&gt;</pre>
      </td>
     </tr>
     <tr>
      <td>
       133192879
      </td>
      <td>
       <p>
        Summary: There is a very high latency when using the API or UI to get your
          organization's deployment status. This latency can result in an
        <code dir="ltr" translate="no">
         HTTP 204 (No
          Content)
        </code>
        or an
        <code dir="ltr" translate="no">
         HTTP 400 (Bad Request)
        </code>
        response.
       </p>
       <p>
        Workaround: Refresh your browser (or resend the request).
       </p>
      </td>
     </tr>
    </tbody>
   </table>
  </div>
 </article>
</article>