<article class="devsite-article">
 <article class="devsite-article-inner">
  <div background="google-blue" class="devsite-banner devsite-banner-announcement">
   <div class="devsite-banner-message">
    <div class="devsite-banner-message-text">
     A new version of Anthos GKE on AWS was released on May 7. See the
     <a href="/anthos/gke/docs/aws/release-notes">
      release notes
     </a>
     for information on breaking changes.
    </div>
   </div>
  </div>
  <h1 class="devsite-page-title">
   Security bulletins
  </h1>
  <devsite-toc class="devsite-nav" devsite-toc-embedded="">
  </devsite-toc>
  <div class="devsite-article-body clearfix">
   <aside class="beta">
    <p>
     <strong>
      Beta
     </strong>
    </p>
    <p>
     This product or feature is covered by the
     <a href="/terms/service-terms#1">
      Pre-GA Offerings Terms
     </a>
     of the Google Cloud Platform
        Terms of Service. Pre-GA products and features may have limited support, and changes to
        pre-GA products and features may not be compatible with other pre-GA versions.
            For more information, see the
     <a href="/products#product-launch-stages">
      launch stage descriptions
     </a>
     .
    </p>
   </aside>
   <p>
    Learn about security bulletins for Anthos GKE on AWS.
   </p>
   <section class="bulletins">
    <h2 data-text="GCP-2020-007" id="gcp-2020-007" tabindex="0">
     GCP-2020-007
    </h2>
    <strong>
     Published:
    </strong>
    2020-06-01
    <br/>
    <table>
     <thead>
      <tr>
       <th width="70%">
        Description
       </th>
       <th>
        Severity
       </th>
       <th>
        Notes
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        <p>
         Server Side Request Forgery (SSRF) vulnerability,
         <a class="external" href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-8555">
          CVE-2020-8555
         </a>
         ,
      was recently discovered in Kubernetes, allowing certain authorized
      users to leak up to 500 bytes of sensitive information from the
      control plane host network. The Google Kubernetes Engine (GKE) control
      plane uses controllers from Kubernetes and is thus affected by this
      vulnerability. We recommend that you upgrade
      the control plane to the latest patch version, as we detail below.
      A node upgrade is not required.
         <br/>
        </p>
        <h4 data-text="What should I do?" id="what-should-i-do" tabindex="0">
         What should I do?
        </h4>
        <p>
         Anthos GKE on AWS (GKE on AWS) v0.2.0 or newer already includes
      the patch for this vulnerability. If you are using a previous version,
         <a href="/anthos/gke/docs/aws/how-to/prerequisites">
          download a new version of the anthos-gke command line tool
         </a>
         and recreate your management and user clusters.
        </p>
        <h4 data-text="What vulnerability is addressed by this patch? " id="what-vulnerability-is-addressed-by-this-patch" tabindex="0">
         What vulnerability is addressed by this patch?
        </h4>
        <p>
         These patches mitigate vulnerability CVE-2020-8555. This is rated
      as a Medium vulnerability for GKE as it was difficult
      to exploit due to various control plane hardening measures.
        </p>
        <p>
         An attacker with permissions to create a Pod with certain
      built-in Volume types (GlusterFS, Quobyte, StorageFS, ScaleIO) or
      permissions to create a StorageClass can cause
         <code dir="ltr" translate="no">
          kube-controller-manager
         </code>
         to make
         <code dir="ltr" translate="no">
          GET
         </code>
         requests or
         <code dir="ltr" translate="no">
          POST
         </code>
         requests
         <em>
          without
         </em>
         an attacker controlled request
      body from the master's host network. These volume types are rarely used on
      GKE, so new use of these volume types may be a
      useful detection signal.
        </p>
        <p>
         Combined with a means to leak the results of the
         <code dir="ltr" translate="no">
          GET/POST
         </code>
         back to the attacker, such as through logs, this can lead to disclosure
      of sensitive information. We have updated the storage drivers in
      question to remove the potential for such leaks.
        </p>
       </td>
       <td>
        <p>
         Medium
        </p>
       </td>
       <td>
        <p>
         <a class="external" href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-8555">
          CVE-2020-8555
         </a>
        </p>
       </td>
      </tr>
     </tbody>
    </table>
    <h2 data-text="GCP-2020-006" id="gcp-2020-006" tabindex="0">
     GCP-2020-006
    </h2>
    <strong>
     Published:
    </strong>
    2020-06-01
    <br>
     <table>
      <thead>
       <tr>
        <th width="70%">
         Description
        </th>
        <th>
         Severity
        </th>
        <th>
         Notes
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td>
         <p>
          Kubernetes has disclosed a
          <a class="external" href="https://github.com/kubernetes/kubernetes/issues/91507">
           vulnerability
          </a>
          that allows a privileged container to redirect node traffic to another
        container. Mutual TLS/SSH traffic, such as between the kubelet and API
        server or traffic from applications using mTLS cannot be read or
        modified by this attack. All Google Kubernetes Engine (GKE) nodes are
        affected by this vulnerability, and we recommend that you upgrade
        to the latest patch version, as we detail below.
          <h4 data-text=" What should I do?" id="what-should-i-do_1" tabindex="0">
           What should I do?
          </h4>
          <p>
           <a href="https://cloud.google.com/anthos/gke/docs/aws/how-to/prerequisites">
            Download the anthos-gke command line tool
           </a>
           with the following version or newer and recreate your management and
        user clusters:
          </p>
          <ul>
           <li>
            aws-0.2.1-gke.7
           </li>
          </ul>
          <p>
           Very few containers typically require
           <code dir="ltr" translate="no">
            CAP_NET_RAW
           </code>
           . This
        and other powerful capabilities should be blocked by default through
           <a href="/anthos-config-management/docs/concepts/policy-controller">
            Anthos Policy Controller
           </a>
           or by updating your Pod specs:
          </p>
          Drop the
          <code dir="ltr" translate="no">
           CAP_NET_RAW
          </code>
          capability from containers:
          <ul>
           <li>
            By using Anthos Policy Controller/Gatekeeper with this
            <a class="external" href="https://github.com/open-policy-agent/gatekeeper/blob/master/library/pod-security-policy/capabilities/template.yaml">
             constraint template
            </a>
            and applying it, for example:
           </li>
           <pre class="devsite-click-to-copy" dir="ltr" translate="no">
# Dropping CAP_NET_RAW with Gatekeeper
# (requires the K8sPSPCapabilities template)
apiversion: constraints.gatekeeper.sh/v1beta1
kind:  K8sPSPCapabilities
metadata:
  name: forbid-cap-net-raw
spec:
  match:
    kinds:
      - apiGroups: [""]
      kinds: ["Pod"]
    namespaces:
      #List of namespaces to enforce this constraint on
      - default
    # If running gatekeeper &gt;= v3.1.0-beta.5,
    # you can exclude namespaces rather than including them above.
    excludedNamespaces:
      - kube-system
  parameters:
    requiredDropCapabilities:
      - "NET_RAW"
</pre>
          </ul>
          <ul>
           <li>
            Or by updating your Pod specs:
           </li>
           <pre class="devsite-click-to-copy" dir="ltr" translate="no">
# Dropping CAP_NET_RAW from a Pod:
apiVersion: v1
kind: Pod
metadata:
  name: no-cap-net-raw
spec:
  containers:
    -name: may-container
     ...
    securityContext:
      capabilities:
        drop:
          -NET_RAW
</pre>
          </ul>
          <h4 data-text="What vulnerability is addressed by this patch? " id="what-vulnerability-is-addressed-by-this-patch_1" tabindex="0">
           What vulnerability is addressed by this patch?
          </h4>
          <p>
           The patch mitigate the following vulnerability:
          </p>
          <p>
           The vulnerability described in
           <a class="external" href="https://github.com/kubernetes/kubernetes/issues/91507">
            Kubernetes issue 91507
           </a>
           <code dir="ltr" translate="no">
            CAP_NET_RAW
           </code>
           capability (which is included in the default container
capability set) to maliciously configure the IPv6 stack on the node and redirect
node traffic to the attacker controlled container. This will allow the attacker
to intercept/modify traffic originating from or destined for the node. Mutual
TLS/SSH traffic, such as between the kubelet and API server or traffic from
applications using mTLS cannot be read or modified by this attack.
          </p>
         </p>
        </td>
        <td>
         <p>
          Medium
         </p>
        </td>
        <td>
         <p>
          <a class="external" href="https://github.com/kubernetes/kubernetes/issues/91507">
           Kubernetes issue 91507
          </a>
          <br/>
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </br>
   </section>
  </div>
 </article>
</article>