<article class="devsite-article">
 <article class="devsite-article-inner">
  <div background="teal" class="devsite-banner devsite-banner-announcement">
   <div class="devsite-banner-message">
    <div class="devsite-banner-message-text">
     <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
      <p>
       <strong>
        REMARQUE
       </strong>
       : Certains aspects de ce produit sont en version bêta. Les options d'installation hybride sont en disponibilité générale. Pour rejoindre le programme bêta, contactez votre représentant Apigee.
      </p>
     </meta>
    </div>
   </div>
  </div>
  <h1 class="devsite-page-title">
   1.2.0 - Notes de version de l'environnement d'exécution Apigee hybrid
  </h1>
  <devsite-toc class="devsite-nav" devsite-toc-embedded="">
  </devsite-toc>
  <div class="devsite-article-body clearfix">
   <p>
    Le 3 avril 2020, nous avons lancé la version 1.2.0 de l'environnement d'exécution Apigee hybrid.
   </p>
   <aside class="objective">
    Pour en savoir plus, consultez les ressources suivantes :
    <ul>
     <li>
      <em>
       <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/what-is-hybrid?hl=fr">
        En savoir plus sur les environnements hybrides
       </a>
      </em>
      ou
      <em>
       <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/big-picture?hl=fr">
        Commencer l'installation
       </a>
      </em>
     </li>
     <li>
      <em>
       Créer un compte payant
      </em>
      : contactez le
      <a href="https://pages.apigee.com/contact-sales-reg.html?hl=fr">
       service commercial d'Apigee
      </a>
     </li>
     <li>
      <em>
       Questions ou problèmes ?
      </em>
      Contactez l'
      <a class="external" href="https://cloud.google.com/apigee/support/?hl=fr">
       assistance Apigee
      </a>
     </li>
    </ul>
   </aside>
   <section class="expandable">
    <h4 class="showalways" data-text="Aide et notifications" id="help-notifications" tabindex="0">
     Aide et notifications
    </h4>
    <div class="note">
     <p>
      <strong>
       Questions ou problèmes ?
      </strong>
      <a href="https://cloud.google.com/apigee/support/?hl=fr">
       Cliquez ici pour obtenir de l'aide.
      </a>
     </p>
     <p>
      <strong>
       Notifications de version
      </strong>
      : accédez à
      <a href="http://status.apigee.com?hl=fr">
       http://status.apigee.com
      </a>
      et cliquez sur
      <strong>
       S'abonner aux mises à jour
      </strong>
      .
     </p>
     <p>
      <a href="https://cloud.google.com/apigee/docs/release/notes/apigee-release-notes?hl=fr">
       Page d'accueil des notes de version
      </a>
     </p>
    </div>
   </section>
   <h2 data-text="Mise à niveau…" id="upgrading" tabindex="0">
    Mise à niveau…
   </h2>
   <aside class="warning">
    Pour passer de la version 1.1.1 à la version 1.2.0, vous devez modifier votre fichier de remplacement qui est incompatible avec la version 1.1.1. Ces modifications sont nécessaires pour effectuer la mise à niveau. La nouvelle configuration corrige un problème, dans certains cas où les appels d'API ont été acheminés vers le mauvais environnement.
  Pour en savoir plus, consultez la section
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/upgrade?hl=fr">
     Mettre à niveau Apigee hybrid
    </a>
    .
   </aside>
   <h2 data-text="Nouvelles fonctionnalités et mises à jour" id="new-features-and-updates" tabindex="0">
    Nouvelles fonctionnalités et mises à jour
   </h2>
   <p>
    Voici les nouvelles fonctionnalités et mises à jour de cette version.
   </p>
   <h3 data-text="Une nouvelle configuration d'hôte virtuel a été ajoutée pour spécifier les règles de routage." id="a-new-virtual-host-configuration-was-added-to-specify-routing-rules" tabindex="0">
    Une nouvelle configuration d'hôte virtuel a été ajoutée pour spécifier des règles de routage
   </h3>
   <p>
    La nouvelle fonctionnalité de configuration
    <code dir="ltr" translate="no">
     virtualhosts
    </code>
    résout un problème selon lequel l'ordre dans lequel les chemins de base ont été acheminés vers plusieurs environnements n'était pas garanti. Pour en savoir plus, consultez l'article
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/base-path-routing?hl=fr">
     Configurer des hôtes virtuels
    </a>
    . (150336519)
   </p>
   <h3 data-text="Version bêta de la règle OASValidation" id="beta-release-of-the-oasvalidation-policy" tabindex="0">
    Version bêta de la stratégie OASValidation
   </h3>
   <p>
    La stratégie OASValidation (OpenAPI Spécification Validation) (bêta) vous permet de valider une requête ou un message de réponse entrants par rapport à une spécification OpenAPI 3.0 (JSON ou YAML).
  Pour plus d'informations, consultez la
    <a href="https://cloud.google.com/apigee/docs/api-platform/reference/policies/oas-validation-policy?hl=fr">
     stratégie OASValidation (bêta)
    </a>
    . (144949685)
   </p>
   <h3 data-text="Version bêta de la compatibilité WebSocket" id="beta-release-of-websocket-support" tabindex="0">
    Version bêta de la compatibilité WebSocket
   </h3>
   <p>
    Apigee hybrid est compatible avec les connexions WebSocket. Les clients proxy d'API peuvent désormais demander une mise à niveau du protocole de HTTP vers WebSockets.
  Pour en savoir plus, consultez la section
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/websockets?hl=fr">
     Utiliser WebSockets (version bêta)
    </a>
    .
   </p>
   <h3 data-text="Accéder aux valeurs de secret des règles à partir de secrets Kubernetes" id="accessing-policy-secret-values-from-kubernetes-secrets" tabindex="0">
    Accéder aux valeurs de secret des règles à partir de secrets Kubernetes
   </h3>
   <p>
    Une nouvelle fonctionnalité vous permet d'accéder aux valeurs stockées dans un secret Kubernetes dans les variables de flux proxy.
    Pour en savoir plus, consultez la section
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/k8s-secrets?hl=fr">
     Stocker des données dans un secret Kubernetes
    </a>
    .
    (133377603)
   </p>
   <h3 data-text="L'élément Apigee Operator (AO) remplace ADAC et ADAH" id="ao" tabindex="0">
    L'élément Apigee Operator (AO) remplace ADAC et ADAH
   </h3>
   <p>
    Les opérateurs Apigee (AO) créent et mettent à jour les ressources Kubernetes et Istio de bas niveau nécessaires au déploiement et à la gestion de l'AD. Par exemple, le contrôleur effectue le lancement des processeurs de message. Validez également la configuration ApigeeDeployment avant de la conserver dans le cluster Kubernetes. AO remplace Apigee Deployment Admissionhook (ADAH) et Apigee Deployment Control (ADC).
  Voir
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/config-prop-ref?hl=fr#ao">
     ao dans la documentation de référence sur les propriétés de configuration
    </a>
    .
  (151250559)
   </p>
   <h3 data-text="Remplacer et rendre obsolètes certaines propriétés de configuration du cluster et du projet" id="replace-and-deprecate-certain-cluster-and-project-configuration-properties" tabindex="0">
    Remplacer et rendre obsolètes certaines propriétés de configuration du cluster et du projet
   </h3>
   <p>
    Deux propriétés de configuration ont été ajoutées :
    <code dir="ltr" translate="no">
     k8sCluster
    </code>
    et
    <code dir="ltr" translate="no">
     gcp
    </code>
    .
   Ces propriétés remplacent les propriétés obsolètes suivantes :
    <code dir="ltr" translate="no">
     k8sClusterName
    </code>
    ,
    <code dir="ltr" translate="no">
     gcpRegion
    </code>
    et
    <code dir="ltr" translate="no">
     gcpProjectID
    </code>
    . Pour en savoir plus, consultez la
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/config-prop-ref?hl=fr">
     documentation de référence sur les propriétés de configuration
    </a>
    . (146299599)
   </p>
   <h3 data-text="Expansion du volume persistant pour Cassandra sur Kubernetes" id="persistent-volume-expansion-for-cassandra-on-kubernetes" tabindex="0">
    Expansion du volume persistant pour Cassandra sur Kubernetes
   </h3>
   <p>
    Un processus a été ajouté pour étendre le volume persistant utilisé par apigee-cassandra pour répondre aux besoins de stockage, sans avoir à ajouter d'autres nœuds pour augmenter le stockage. Consultez la section
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/expand-persistent-volumes?hl=fr">
     Développer les volumes persistants Cassandra
    </a>
    . (138167919)
   </p>
   <h3 data-text="Compatibilité avec des sources supplémentaires pour les certificats, les clés de chiffrement et les associations de sécurité" id="support-additional-sources-for-certs,-encryption-keys-and-sas" tabindex="0">
    Compatibilité avec des sources supplémentaires pour les certificats, les clés de chiffrement et les autorités de contrôle
   </h3>
   <p>
    De nouvelles propriétés de configuration ont été ajoutées pour offrir une plus grande flexibilité dans la manière de spécifier des certificats TLS, des clés de chiffrement et des clés de compte de service. Ces nouvelles propriétés sont répertoriées ci-dessous :
   </p>
   <ul>
    <li>
     <code dir="ltr" translate="no">
      kmsEncryptionPath
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      kmsEncryptionSecret.key
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      kmsEncryptionSecret.name
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      cassandra.backup.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      cassandra.restore.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].cacheEncryptionPath
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].cacheEncryptionSecret.key
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].cacheEncryptionSecret.name
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].kmsEncryptionPath
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].kmsEncryptionSecret.key
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].kmsEncryptionSecret.name
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].serviceAccountSecretRefs.synchronizer
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].serviceAccountSecretRefs.udca
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      envs[].sslSecret
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      logger.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      mart.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      mart.sslSecret
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      metrics.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      synchronizer.serviceAccountSecretRef
     </code>
    </li>
    <li>
     <code dir="ltr" translate="no">
      udca.serviceAccountSecretRef
     </code>
    </li>
   </ul>
   <p>
    Pour plus d'informations, consultez la
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/config-prop-ref?hl=fr">
     documentation de référence sur les propriétés de configuration
    </a>
    . (145303466)
   </p>
   <h3 data-text="Autoriser les clients à obscurcir des données avant de les envoyer à l'analyse" id="allow-customers-to-obfuscate-data-before-sending-it-to-analytics" tabindex="0">
    Autoriser les clients à obscurcir les données avant de les envoyer à Google Analytics
   </h3>
   <p>
    Une fonctionnalité a été ajoutée pour vous permettre de obscurcir certaines données d'analyse avant leur envoi au plan de gestion. Pour en savoir plus, consultez la page
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/obfuscate-userdata-for-analytics?hl=fr">
     Obscurcir des données utilisateur pour l'analyse
    </a>
    . (142578910)
   </p>
   <h3 data-text="Développer les volumes persistants pour les ensembles avec état" id="expand-persistent-volumes-for-statefulsets" tabindex="0">
    Développer les volumes persistants pour les ensembles avec état
   </h3>
   <p>
    Une fonctionnalité a été ajoutée pour vous permettre d'étendre le volume persistant utilisé par apigee-cassandra pour répondre aux besoins de stockage, sans ajouter de puissance de calcul supplémentaire.  Pour en savoir plus, consultez la section
    <a href="https://cloud.google.com/apigee/docs/release/notes/hybrid/v1.2/expand-persistent-volumes?hl=fr">
     Développer des volumes persistants pour les ensembles avec état
    </a>
    .
    (138167919)
   </p>
   <h3 data-text="Les versions minimales compatibles de GKE, d'Anthos et de AKS sont mises à niveau" id="minimum-supported-versions-of-gke,-anthos,-and-aks-are-upgraded" tabindex="0">
    Les versions minimales compatibles de GKE, Anthos et AKS sont mises à niveau.
   </h3>
   <p>
    Apigee hybride est désormais compatible avec GKE 1.14.x, Anthos 1.2 et AKS 1.14.x. (149578101)
   </p>
   <h3 data-text="Compatibilité avec TLS 1.3 pour les connexions Northbound" id="support-tls-1.3-for-northbound-connections" tabindex="0">
    Compatibilité avec TLS 1.3 pour les connexions Northbound
   </h3>
   <p>
    Deux propriétés de configuration vous permettent de définir la version TLS minimale et maximale de l'entrée :
    <code dir="ltr" translate="no">
     ingress.minTLSProtocolVersion
    </code>
    et
    <code dir="ltr" translate="no">
     maxTLSProtocolVersion
    </code>
    .
    Les valeurs possibles sont 1.0, 1.1, 1.2, et 1.3. Pour en savoir plus, consultez la
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/config-prop-ref?hl=fr">
     documentation de référence sur les propriétés de configuration
    </a>
    . (117580780)
   </p>
   <h3 data-text="Compatibilité du proxy de redirection pour un environnement d'exécution hybride" id="support-forward-proxy-configuration-for-hybrid-runtime" tabindex="0">
    Possibilité de configurer le proxy de transfert pour l'environnement d'exécution hybride
   </h3>
   <p>
    Le proxy de transfert HTTP est désormais compatible avec les proxys d'API déployés dans un environnement.
    Pour en savoir plus, consultez
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/forward-proxy?hl=fr">
     Configurer l'envoi par proxy
    </a>
    . (148970527)
   </p>
   <h3 data-text="Compatibilité avec plusieurs alias hostAliases par environnement" id="support-multiple-hostaliases-per-environment" tabindex="0">
    Compatibilité avec plusieurs alias d'hôte par environnement
   </h3>
   <p>
    Une nouvelle propriété de configuration,
    <code dir="ltr" translate="no">
     envs[].hostAliases
    </code>
    , a été ajoutée. Cette propriété vous permet d'ajouter plusieurs alias d'hôte à un environnement. Utilisez cet élément au lieu de
    <code dir="ltr" translate="no">
     hostAlias
    </code>
    , qui a été abandonné. Pour plus d'informations, consultez la section
    <a href="https://cloud.google.com/apigee/docs/hybrid/v1.2/environment-create?hl=fr#adding-multiple-host-aliases-to-an-environment">
     Ajouter plusieurs alias d'hôte à un environnement
    </a>
    . (150738495)
   </p>
   <h3 data-text="Autoriser les modèles pour les ensembles de propriétés" id="allow-templates-for-property-sets" tabindex="0">
    Autoriser les modèles pour les ensembles de propriétés
   </h3>
   <p>
    Un nouvel élément &lt;PropertySetRef&gt; a été ajouté à l'élément &lt;AssignVariable&gt; de la règle &lt;AssignMessage&gt;. &lt;PropertySetRef&gt; vous permet de créer une paire nom/clé de propriété de manière dynamique.
         Cette fonctionnalité n'est disponible que pour les proxys d'API déployés sur Apigee hybrid. Consultez la section
    <a href="https://cloud.google.com/apigee/docs/api-platform/reference/policies/assign-message-policy?hl=fr#assignvariable">
     AssignVariable
    </a>
    . (148612340)
   </p>
   <h2 data-text="Bugs résolus" id="bugs-fixed" tabindex="0">
    Bugs résolus
   </h2>
   <p>
    Les bugs suivants sont corrigés dans cette version. Cette liste est principalement destinée aux utilisateurs qui vérifient si leurs demandes d'assistance ont été corrigées. Il n'est pas conçu pour fournir des informations détaillées pour tous les utilisateurs.
   </p>
   <table class="table" summary="Bugs corrigés dans cette version">
    <thead>
     <tr>
      <th>
       ID du problème
      </th>
      <th>
       Nom du composant
      </th>
      <th>
       Description
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       147958049
      </td>
      <td>
       Exécution
      </td>
      <td>
       Un problème de minutage dans le séquençage de l'environnement d'exécution a été résolu, ce qui a parfois empêché le démarrage de la synchronisation.
      </td>
     </tr>
     <tr>
      <td>
       149867244
      </td>
      <td>
       Plate-forme K8S
      </td>
      <td>
       Échec du pod apigee-cps-setup dans une configuration multirégionale
      </td>
     </tr>
     <tr>
      <td>
       150187652 / 149117839
      </td>
      <td>
       Exécution
      </td>
      <td>
       Impossible d'utiliser des traits d'union dans les noms d'environnement
      </td>
     </tr>
     <tr>
      <td>
       149220463
      </td>
      <td>
       Pod MP
      </td>
      <td>
       Les proxys précédemment déployés doivent être redéployés.
      </td>
     </tr>
     <tr>
      <td>
       144321144
      </td>
      <td>
       Exécution
      </td>
      <td>
       Les proxys avec des hôtes virtuels sécurisés n'ont pas pu être actualisés.
      </td>
     </tr>
     <tr>
      <td>
       147685310
      </td>
      <td>
       Exécution
      </td>
      <td>
       Échec de l'initialisation de l'outil de synchronisation en raison de l'échec de la récupération du jeton GCP lors de l'initialisation.
      </td>
     </tr>
     <tr>
      <td>
       151115900
      </td>
      <td>
       Exécution
      </td>
      <td>
       La vérification interne périodique n'apparaît pas pour HybridMART, ce qui entraîne de faux résultats.
      </td>
     </tr>
    </tbody>
   </table>
   <h2 data-text="Problèmes connus" id="known-issues" tabindex="0">
    Problèmes connus
   </h2>
   <p>
    Le tableau suivant décrit les problèmes connus de cette version :
   </p>
   <table class="purple">
    <thead>
     <tr>
      <th>
       Problème
      </th>
      <th>
       Description
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       161658025
      </td>
      <td>
       <p>
        État de déploiement inexact pour les flux partagés
       </p>
       <p>
        Pour les flux partagés, l'état du déploiement n'est pas correctement signalé à l'interface utilisateur, ce qui crée une icône de déploiement en rotation permanente. Si vous avez déployé un flux partagé et que l'icône de déploiement en cours d'exécution s'affiche, vous devez supposer que le déploiement a échoué.
       </p>
       <p>
        Pour obtenir l'état correct du déploiement, utilisez l'API
        <a href="https://cloud.google.com/apigee/docs/reference/apis/apigee/rest?hl=fr#rest-resource:-v1.organizations.environments.sharedflows.revisions.deployments">
         v1.organizations.environments.sharedflows.revisions.deployments
        </a>
        .
            Exemple :
       </p>
       <pre class="devsite-terminal" dir="ltr" translate="no">

curl -s -H "$AUTH" \
"https://apigee.googleapis.com/v1/o/$ORG/e/$ENV/sharedflows/$FLOW/revisions/$REV/deployments"</pre>
      </td>
     </tr>
     <tr>
      <td>
       ND
      </td>
      <td>
       <p>
        Erreur d'en-tête HTTP non valide : l'entrée Istio transfère toutes les réponses cibles entrantes au protocole HTTP2. Comme le processeur de messages hybride n'accepte que le protocole HTTP1, vous pouvez rencontrer l'erreur suivante lorsqu'un proxy d'API est appelé :
       </p>
       <pre class="prettyprint" dir="ltr" translate="no">

http2 error: Invalid HTTP header field was received: frame type: 1, stream: 1,
   name: [:authority], value: [domain_name]</pre>
       <p>
        Si cette erreur s'affiche, vous pouvez effectuer l'une des actions suivantes pour corriger le problème :
       </p>
       <ul>
        <li>
         Modifiez le service cible pour omettre l'en-tête "Host" dans la réponse.
        </li>
        <li>
         Si nécessaire, supprimez l'en-tête d'hôte à l'aide de la règle AssignMessage dans votre proxy d'API.
        </li>
       </ul>
      </td>
     </tr>
     <tr>
      <td>
       144584813
      </td>
      <td>
       Si vous créez une session de débogage, mais qu'elle ne comporte pas encore de transactions, l'
       <a href="https://cloud.google.com/hybrid/v1.2/reference/apis/rest/v1/organizations.environments.apis.revisions.debugsessions/list?hl=fr">
        API List Debug Sessions
       </a>
       ne l'inclut pas dans la liste. L'API n'inclut les sessions dans la réponse que si elles contiennent au moins une transaction.
      </td>
     </tr>
     <tr>
      <td>
       143659917
      </td>
      <td>
       <p>
        Le paramètre d'expiration de la règle PopulateCache doit être défini sur une valeur explicite comprise entre 1 et 30. Exemple :
       </p>
       <pre class="prettyprint" dir="ltr" translate="no">

&lt;ExpirySettings&gt;
  &lt;TimeoutInSec&gt;30&lt;/TimeoutInSec&gt;
&lt;/ExpirySettings&gt;</pre>
      </td>
     </tr>
     <tr>
      <td>
       133192879
      </td>
      <td>
       <p>
        Résumé : La latence est très élevé lorsque vous utilisez l'API ou l'interface utilisateur pour obtenir l'état de déploiement de votre organisation. Cette latence peut aboutir à une réponse
        <code dir="ltr" translate="no">
         HTTP 204 (No
          Content)
        </code>
        ou
        <code dir="ltr" translate="no">
         HTTP 400 (Bad Request)
        </code>
        .
       </p>
       <p>
        Solution : actualisez votre navigateur (ou renvoyez la requête).
       </p>
      </td>
     </tr>
    </tbody>
   </table>
  </div>
 </article>
</article>