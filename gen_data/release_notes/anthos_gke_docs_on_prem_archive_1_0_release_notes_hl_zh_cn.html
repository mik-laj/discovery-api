<article class="devsite-article">
 <article class="devsite-article-inner">
  <h1 class="devsite-page-title">
   版本说明
  </h1>
  <devsite-toc class="devsite-nav" devsite-toc-embedded="">
  </devsite-toc>
  <div class="devsite-article-body clearfix">
   <section class="intro">
    <p>
     本页面记录了 Anthos GKE On-Prem 的正式版更新。您可以定期查看此页面，了解有关新增功能、功能更新、错误修复、已知问题和弃用功能的公告。
    </p>
    <p>
    </p>
    <p>
     另请参阅：
    </p>
    <ul>
     <li>
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/downloads?hl=zh-cn">
       下载
      </a>
     </li>
     <li>
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/versioning-and-upgrades?hl=zh-cn">
       版本控制和升级
      </a>
     </li>
     <li>
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/how-to/upgrading?hl=zh-cn">
       升级集群
      </a>
     </li>
     <li>
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/how-to/upgrading?hl=zh-cn">
       升级管理员工作站
      </a>
     </li>
    </ul>
    <p>
    </p>
   </section>
   <section>
    <p>
     您可以在
     <a href="https://cloud.google.com/release-notes?hl=zh-cn">
      Google Cloud 版本说明
     </a>
     页面上查看所有 Google Cloud 的最新产品动态。
    </p>
   </section>
   <section class="xml">
    <p>
     要接收最新产品动态，请将本页面的网址添加到您的
     <a class="external" href="https://wikipedia.org/wiki/Comparison_of_feed_aggregators">
      Feed 阅读器
     </a>
     ，或直接添加 Feed 网址：
     <code dir="ltr" translate="no">
      https://cloud.google.com/feeds/gkeonprem-release-notes.xml
     </code>
    </p>
   </section>
   <section class="releases">
    <h2 data-text="2019 年 8 月 22 日" id="august_22_2019" tabindex="0">
     2019 年 8 月 22 日
    </h2>
    <p>
     GKE On-Prem 1.0.2-gke.3 版本现已发布。此补丁程序版本包含以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      Seesaw 现在支持手动负载平衡。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      现在可以为管理员集群和用户集群指定不同的 vSphere 网络。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      您现在可以使用
      <code dir="ltr" translate="no">
       gkectl
      </code>
      删除用户集群。请参阅
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/how-to/administration/deleting-a-user-cluster?hl=zh-cn">
       删除用户集群
      </a>
      。
     </p>
    </div>
    <h3 data-text="更改" id="changes" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <code dir="ltr" translate="no">
      gkectl diagnose snapshot
     </code>
     现在从用户集群控制平面获取日志。
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      GKE On-Prem OIDC 规范已更新，新增了几个字段：
      <code dir="ltr" translate="no">
       kubectlredirecturl
      </code>
      、
      <code dir="ltr" translate="no">
       scopes
      </code>
      、
      <code dir="ltr" translate="no">
       extraparams
      </code>
      和
      <code dir="ltr" translate="no">
       usehttpproxy
      </code>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      Calico 已更新至 3.7.4 版本。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      Cloud Monitoring 的系统指标前缀已从
      <code dir="ltr" translate="no">
       external.googleapis.com/prometheus/
      </code>
      更改为
      <code dir="ltr" translate="no">
       kubernetes.io/anthos/
      </code>
      。如果您要跟踪指标或提醒，请使用下一个前缀更新您的信息中心。
     </p>
    </div>
    <h3 data-text="修复" id="fixed" tabindex="0">
     修复
    </h3>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/security-bulletins?hl=zh-cn#august-22-2019">
       修复了 CVE-2019-11247 中的漏洞
      </a>
      。
     </p>
    </div>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/security-bulletins?hl=zh-cn#august-23-2019">
       修复了 RBAC 代理中的漏洞
      </a>
      。
     </p>
    </div>
    <h2 data-text="2019 年 7 月 30 日" id="july_30_2019" tabindex="0">
     2019 年 7 月 30 日
    </h2>
    <p>
     GKE On-Prem 1.0.1-gke.5 版本现已发布。此补丁程序版本包含以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features_1" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      已发布
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/reference/cheatsheet?hl=zh-cn">
       GKE On-Prem 备忘单
      </a>
      。
     </p>
    </div>
    <h3 data-text="更改" id="changes_1" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      如果您使用的是静态 IP，
      <code dir="ltr" translate="no">
       gkectl check-config
      </code>
      现在还会检查节点 IP 是否可用。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      在尝试上传虚拟机的 OVA 映像之前，
      <code dir="ltr" translate="no">
       gkectl prepare
      </code>
      现在会检查虚拟机是否存在并在 vSphere 中被标记为模板。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      添加了对指定 vCenter 集群以及该集群中资源池的支持。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      将 F5 BIG-IP 控制器升级到 1.9.0 版。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      将 Istio Ingress 控制器升级到 1.2.2 版。
     </p>
    </div>
    <h3 data-text="修复" id="fixes" tabindex="0">
     修复
    </h3>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      修复了管理员工作站的 Docker 注册表中的注册表数据永久性问题。
     </p>
    </div>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      修复了检查用户集群名称是否已在使用的验证。
     </p>
    </div>
    <h2 data-text="2019 年 6 月 17 日" id="june_17_2019" tabindex="0">
     2019 年 6 月 17 日
    </h2>
    <p>
     GKE On-Prem 现已全面推出。1.0.10 版包含以下更改：
    </p>
    <h3 data-text="从 beta-1.4 版升级到 1.0.10 版" id="beta_upgrade" tabindex="0">
     从 beta-1.4 版升级到 1.0.10 版
    </h3>
    <p>
     在将您的 Beta 版集群升级至首个通用版本之前，请执行
     <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/how-to/upgrading/from-beta?hl=zh-cn">
      从 GKE On-Prem Beta 版升级到通用版
     </a>
     中所述步骤，并注意以下几点：
    </p>
    <ul>
     <li>
      <p>
       如果您运行的是 beta-1.4 之前的 Beta 版，请务必先升级到 beta-1.4 版本。
      </p>
     </li>
     <li>
      <p>
       如果您的 Beta 版集群运行自己的 L4 负载平衡器（不是默认的 F5 BIG-IP），您需要删除并重新创建集群，以运行最新的 GKE On-Prem 版本。
      </p>
     </li>
     <li>
      <p>
       如果您的集群已从 beta-1.3 升级到 beta-1.4，请在升级之前
       <i>
        对每个用户集群
       </i>
       运行以下命令：
      </p>
      <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl delete crd networkpolicies.crd.projectcalico.org</pre>
     </li>
     <li>
      <p>
       现在需要验证 vCenter 证书。（已不再支持“
       <code dir="ltr" translate="no">
        vsphereinsecure
       </code>
       ”。）如果要将 Beta 1.4 集群升级到 1.0.10，则需要在升级配置文件中提供受 vCenter 信任的根 CA 公共证书。
      </p>
     </li>
     <li>
      <p>
       您需要升级
       <i>
        所有
       </i>
       正在运行的集群。要使此升级成功，您的集群不能以混合版本状态运行。
      </p>
     </li>
     <li>
      <p>
       您需要先将管理员集群升级到最新版本，然后再升级您的用户集群。
      </p>
     </li>
    </ul>
    <p>
    </p>
    <h3 data-text="新增功能" id="new-features_2" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      您现在可以启用
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/latest/how-to/installation/manual-lb?hl=zh-cn">
       手动负载平衡模式
      </a>
      来配置 L4 负载平衡器。您仍然可以选择使用默认负载平衡器 F5 BIG-IP。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      已更新 GKE On-Prem 的配置驱动安装过程。您现在可以使用单个
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/concepts/overview?hl=zh-cn#config">
       配置文件
      </a>
      进行声明式安装。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      添加
      <code dir="ltr" translate="no">
       gkectl create-config
      </code>
      ，可生成用于安装 GKE On-Prem、升级现有集群以及在现有安装中创建其他用户集群的配置文件。这将取代安装向导和先前版本中的
      <code dir="ltr" translate="no">
       create-config.yaml
      </code>
      。请参阅有关
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/latest/how-to/installation/install?hl=zh-cn#generate_config">
       安装 GKE On-Prem
      </a>
      的更新文档。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      添加
      <code dir="ltr" translate="no">
       gkectl check-config
      </code>
      ，用于验证 GKE on-prem 配置文件。请参阅有关
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/latest/how-to/installation/install?hl=zh-cn#validate_config">
       安装 GKE On-Prem
      </a>
      的更新文档。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      向
      <code dir="ltr" translate="no">
       gkectl prepare
      </code>
      添加可选的
      <code dir="ltr" translate="no">
       --validate-attestations
      </code>
      标志。此标志用于验证您的管理员工作区中包含的容器映像是否由 Google 构建并签名，并已准备好部署。请参阅有关
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/latest/how-to/installation/install?hl=zh-cn#prepare">
       安装 GKE On-Prem
      </a>
      的更新文档。
     </p>
    </div>
    <h3 data-text="更改" id="changes_2" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      将 Kubernetes 版本升级到 1.12.7-gke.19。您现在可以
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/latest/how-to/administration/upgrading-clusters?hl=zh-cn">
       将集群升级
      </a>
      到此版本。您无法再创建运行 Kubernetes 版本 1.11.2-gke.19 的集群。
     </p>
     <p>
      我们建议您先升级管理员集群，然后再升级用户集群。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      将 Istio Ingress 控制器升级到 1.1.7 版本。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      现在需要验证 vCenter 证书。已不再支持“
      <code dir="ltr" translate="no">
       vsphereinsecure
      </code>
      ”）。您可以在 GKE On-Prem 配置文件的
      <code dir="ltr" translate="no">
       cacertpath
      </code>
      字段中提供证书。
     </p>
     <p>
      当客户端调用 vCenter 服务器时，vCenter 服务器必须通过出示证书来向客户端证明其身份。该证书必须由证书授权机构（CA）签署。证书不能是自签名证书。
     </p>
     <p>
      如果要将 Beta 1.4 集群升级到 1.0.10，则需要在升级配置文件中提供受 vCenter 信任的根 CA 公共证书。
     </p>
    </div>
    <h3 data-text="已知问题" id="known-issues" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/latest/upgrading-clusters?hl=zh-cn">
       升级集群
      </a>
      可能会导致使用
      <a class="external" href="https://kubernetes.io/docs/concepts/workloads/pods/disruptions/#how-disruption-budgets-work">
       PodDisruptionBudgets
      </a>
      （PDBs）的工作负载中断或停机。
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      您可能无法将使用
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/latest/how-to/installation/manual-lb?hl=zh-cn">
       手动负载平衡模式
      </a>
      的 Beta 版集群升级到 GKE On-Prem 版本 1.0.10。要对这些集群进行升级并继续使用您自己的负载平衡器，您需要重新创建集群。
     </p>
    </div>
    <h2 data-text="2019 年 5 月 24 日" id="may_24_2019" tabindex="0">
     2019 年 5 月 24 日
    </h2>
    <p>
     GKE On-Prem Beta 版 1.4.7 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features_3" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      在
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.4/how-to/administration/diagnose?hl=zh-cn#capture_admin">
       <code dir="ltr" translate="no">
        gkectl diagnose snapshot
       </code>
      </a>
      命令中，
      <code dir="ltr" translate="no">
       --admin-ssh-key-path
      </code>
      参数现在是可选的。
     </p>
    </div>
    <h3 data-text="更改" id="changes_3" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      2019 年 5 月 8 日，我们对 Connect for Anthos 进行了一项更改，该服务可让您使用 Cloud Console 与 GKE On-Prem 集群进行交互。要使用新的 Connect for Anthos 代理，您必须通过 Cloud Console 重新注册集群，或者必须升级到 Anthos GKE on-prem-beta-1.4。
     </p>
     <p>
      您的 GKE On-Prem 集群及其上运行的工作负载将继续不间断运行。但是，在您重新注册集群或升级到 beta-1.4 之前，集群在 Cloud Console 中将不可见。
     </p>
     <p>
      在重新注册或升级之前，请确保您的服务帐号具有
      <code dir="ltr" translate="no">
       gkehub.connect
      </code>
      角色。此外，如果您的服务帐号具有旧的 clusterregistry.connect 角色，则最好移除该角色。
     </p>
     <p>
      为您的服务帐号授予 gkehub.connect 角色：
     </p>
     <pre class="devsite-click-to-copy" dir="ltr" translate="no">gcloud projects add-iam-policy-binding <var class="edit">[PROJECT_ID]</var> \
      --member="serviceAccount:<var class="edit">[SERVICE_ACCOUNT_NAME]</var>@<var class="edit">[PROJECT_ID]</var>.iam.gserviceaccount.com" \
      --role="roles/gkehub.connect"</pre>
     <p>
      如果您的服务帐号具有旧的
      <code dir="ltr" translate="no">
       clusterregistry.connect
      </code>
      角色，请移除旧角色：
     </p>
     <pre class="devsite-click-to-copy" dir="ltr" translate="no">gcloud projects remove-iam-policy-binding <var class="edit">[PROJECT_ID]</var> \
      --member="serviceAccount:<var class="edit">[SERVICE_ACCOUNT_NAME]</var>@<var class="edit">[PROJECT_ID]</var>.iam.gserviceaccount.com" \
      --role="roles/clusterregistry.connect"</pre>
     <p>
      重新注册您的集群，或升级到 Anthos GKE On-Prem beta-1.4。
     </p>
     <p>
      要
      <a href="https://cloud.google.com/kubernetes-engine/connect/updating-agent?hl=zh-cn">
       重新注册集群
      </a>
      ，请执行以下操作：
     </p>
     <pre class="devsite-click-to-copy" dir="ltr" translate="no">gcloud alpha container hub register-cluster <var class="edit">[CLUSTER_NAME]</var> \
      --context=<var class="edit">[USER_CLUSTER_CONTEXT]</var> \
      --service-account-key-file=<var class="edit">[LOCAL_KEY_PATH]</var> \
      --kubeconfig-file=<var class="edit">[KUBECONFIG_PATH]</var> \
      --project=<var class="edit">[PROJECT_ID]</var></pre>
     <p>
      要
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.4/how-to/administration/upgrading-a-cluster?hl=zh-cn">
       升级到 Anthos GKE on-prem beta-1.4
      </a>
      ，请执行以下操作：
     </p>
     <pre class="devsite-click-to-copy" dir="ltr" translate="no">gkectl upgrade --kubeconfig [ADMIN_CLUSTER_KUBECONFIG]</pre>
    </div>
    <h3 data-text="已知问题" id="known-issues_1" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      有一个问题会导致 Connect for Anthos 代理在升级期间无法更新到新版本。要解决此问题，请在升级集群后运行以下命令：
     </p>
     <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl delete pod gke-connect-agent-install -n gke-connect</pre>
    </div>
    <h2 data-text="2019 年 5 月 13 日" id="may_13_2019" tabindex="0">
     2019 年 5 月 13 日
    </h2>
    <h3 data-text="已知问题" id="known-issues_2" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      从版本 beta-1.2 升级到 beta-1.3 的集群可能会受到已知问题的影响，该问题会损坏集群的配置文件并阻止集群日后升级。此问题会影响所有将来的集群升级。
     </p>
     <p>
      您可以通过删除并重新创建从 beta-1.2 升级到 beta-1.3 的集群来解决此问题。
     </p>
     <p>
      要在不删除和重新创建集群的情况下解决此问题，您需要重新编码并应用每个集群的 Secret。执行以下步骤：
     </p>
     <ol>
      <li>
       获取管理员集群中存储的
       <code dir="ltr" translate="no">
        create-config
       </code>
       Secrets 的内容。必须针对 kube-system 命名空间中的
       <code dir="ltr" translate="no">
        create-config
       </code>
       Secret 和每个用户集群命名空间中的
       <code dir="ltr" translate="no">
        create-config
       </code>
       Secrets 执行此操作：
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl get secret create-config -n kube-system -o jsonpath={.data.cfg} | base64 -d &gt; kube-system_create_secret.yaml</pre>
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl get secret create-config -n <var>[USER_CLUSTER_NAME]</var> -o jsonpath={.data.cfg} | base64 -d &gt; <var>[USER_CLUSTER_NAME]</var>_create_secret.yaml</pre>
      </li>
      <li>
       对于每个用户集群，在编辑器中打开
       <code dir="ltr" translate="no">
        <var>
         [USER_CLUSTER_NAME]
        </var>
        _create_secret.yaml
       </code>
       文件。如果
       <code dir="ltr" translate="no">
        registerserviceaccountkey
       </code>
       和
       <code dir="ltr" translate="no">
        connectserviceaccountkey
       </code>
       的值不是
       <code dir="ltr" translate="no">
        REDACTED
       </code>
       ，则无需采取进一步操作：Secret 不需要重新编码并写入集群。
      </li>
      <li>
       在其他编辑器中打开原始
       <code dir="ltr" translate="no">
        create_config.yaml
       </code>
       文件。
      </li>
      <li>
       在
       <code dir="ltr" translate="no">
        <var>
         [USER_CLUSTER_NAME]
        </var>
        _create_secret.yaml
       </code>
       中，将
       <code dir="ltr" translate="no">
        registerserviceaccountkey
       </code>
       和
       <code dir="ltr" translate="no">
        connectserviceaccountkey
       </code>
       的值替换为原始值
       <code dir="ltr" translate="no">
        create_config.yaml
       </code>
       文件中的值。保存更改后的文件。
      </li>
      <li>
       对每个
       <code dir="ltr" translate="no">
        <var>
         [USER_CLUSTER_NAME]
        </var>
        _create_secret.yaml
       </code>
       以及
       <code dir="ltr" translate="no">
        kube-system_create_secret.yaml
       </code>
       文件，请重复执行第 3 至 5 步。
      </li>
      <li>
       Base64 对每个
       <code dir="ltr" translate="no">
        <var>
         [USER_CLUSTER_NAME]
        </var>
        _create_secret.yaml
       </code>
       文件和
       <code dir="ltr" translate="no">
        kube-system_create_secret.yaml
       </code>
       文件进行编码：
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">cat <var>[USER_CLUSTER_NAME]</var>_create_secret.yaml | base64 &gt; <var>[USER_CLUSTER_NAME]</var>_create_secret_create_secret.b64</pre>
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">cat kube-system-cluster_create_secret.yaml | base64 &gt;kube-system-cluster_create_secret.b64</pre>
      </li>
      <li>
       将集群中每个 Secret 中的
       <code dir="ltr" translate="no">
        data[cfg]
       </code>
       字段替换为相应文件的内容：
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl edit secret create-config -n <var class="edit">[USER_CLUSTER_NAME]</var>

  # kubectl edit opens the file in the shell's default text editor
  # Open `first-user-cluster_create_secret.b64` in another editor, and replace
  # the `cfg` value with the copied value
  # Make sure the copied string has no newlines in it!</pre>
      </li>
      <li>
       为每个
       <code dir="ltr" translate="no">
        <var>
         [USER_CLUSTER_NAME]
        </var>
        _create_secret.yaml
       </code>
       Secret 和
       <code dir="ltr" translate="no">
        kube-system_create_secret.yaml
       </code>
       Secret 重复步骤 8。
      </li>
      <li>
       要确保更新成功，请重复步骤 1。
      </li>
     </ol>
    </div>
    <h2 data-text="2019 年 5 月 7 日" id="may_7_2019" tabindex="0">
     2019 年 5 月 7 日
    </h2>
    <p>
     GKE On-Prem Beta 版 1.4.1 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features_4" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      在
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.4/how-to/administration/diagnose?hl=zh-cn#capture_admin">
       <code dir="ltr" translate="no">
        gkectl diagnose snapshot
       </code>
      </a>
      命令中，
      <code dir="ltr" translate="no">
       --admin-ssh-key-path
      </code>
      参数现在是可选的。
     </p>
    </div>
    <h3 data-text="更改" id="changes_4" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      2019 年 5 月 8 日，我们对 Connect for Anthos 进行了一项更改，该服务可让您使用 Cloud Console 与 GKE On-Prem 集群进行交互。要使用新的 Connect for Anthos 代理，您必须通过 Cloud Console 重新注册集群，或者必须升级到 Anthos GKE on-prem-beta-1.4。
     </p>
     <p>
      您的 GKE On-Prem 集群及其上运行的工作负载将继续不间断运行。但是，在您重新注册集群或升级到 beta-1.4 之前，集群在 Cloud Console 中将不可见。
     </p>
     <p>
      在重新注册或升级之前，请确保您的服务帐号具有 gkehub.connect 角色。此外，如果您的服务帐号具有旧的 clusterregistry.connect 角色，则最好移除该角色。
     </p>
     <p>
      为您的服务帐号授予 gkehub.connect 角色：
     </p>
     <pre class="devsite-click-to-copy" dir="ltr" translate="no">gcloud projects add-iam-policy-binding <var class="edit">[PROJECT_ID]</var> \
      --member="serviceAccount:<var class="edit">[SERVICE_ACCOUNT_NAME]</var>@<var class="edit">[PROJECT_ID]</var>.iam.gserviceaccount.com" \
      --role="roles/gkehub.connect"</pre>
     <p>
      如果您的服务帐号具有旧的 clusterregistry.connect 角色，请移除旧角色：
     </p>
     <pre class="devsite-click-to-copy" dir="ltr" translate="no">gcloud projects remove-iam-policy-binding <var class="edit">[PROJECT_ID]</var> \
      --member="serviceAccount:<var class="edit">[SERVICE_ACCOUNT_NAME]</var>@<var class="edit">[PROJECT_ID]</var>.iam.gserviceaccount.com" \
      --role="roles/clusterregistry.connect"</pre>
     <p>
      重新注册您的集群，或升级到 Anthos GKE On-Prem beta-1.4。
     </p>
     <p>
      要
      <a href="https://cloud.google.com/kubernetes-engine/connect/updating-agent?hl=zh-cn">
       重新注册集群
      </a>
      ，请执行以下操作：
     </p>
     <pre class="devsite-click-to-copy" dir="ltr" translate="no">gcloud alpha container hub register-cluster <var class="edit">[CLUSTER_NAME]</var> \
      --context=<var class="edit">[USER_CLUSTER_CONTEXT]</var> \
      --service-account-key-file=<var class="edit">[LOCAL_KEY_PATH]</var> \
      --kubeconfig-file=<var class="edit">[KUBECONFIG_PATH]</var> \
      --project=<var class="edit">[PROJECT_ID]</var></pre>
     <p>
      要
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.4/how-to/administration/upgrading-a-cluster?hl=zh-cn">
       升级到 Anthos GKE on-prem beta-1.4
      </a>
      ，请执行以下操作：
     </p>
     <pre class="devsite-click-to-copy" dir="ltr" translate="no">gkectl upgrade --kubeconfig [ADMIN_CLUSTER_KUBECONFIG]</pre>
    </div>
    <h3 data-text="已知问题" id="known-issues_3" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      有一个问题会导致 Connect for Anthos 代理在升级期间无法更新到新版本。要解决此问题，请在升级集群后运行以下命令：
     </p>
     <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl delete pod gke-connect-agent-install -n gke-connect</pre>
    </div>
    <h2 data-text="2019 年 4 月 25 日" id="april_25_2019" tabindex="0">
     2019 年 4 月 25 日
    </h2>
    <p>
     GKE On-Prem Beta 版 1.3.1 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features_5" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl diagnose snapshot
      </code>
      命令现在有一个
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.3/how-to/administration/diagnose?hl=zh-cn#performing_a_dry_run_for_a_snapshot">
       <code dir="ltr" translate="no">
        --dry-run
       </code>
      </a>
      标志。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl diagnose snapshot
      </code>
      命令现在支持四种
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.3/how-to/administration/diagnose?hl=zh-cn#snapshot_scenarios">
       场景
      </a>
      。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl diagnose snapshot
      </code>
      命令现在支持用于指定命名空间的正则表达式。
     </p>
    </div>
    <h3 data-text="更改" id="changes_5" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      Istio 1.1 现在是默认的
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.3/how-to/administration/upgrading-a-cluster?hl=zh-cn#upgrading_the_ingress_controller">
       入站流量控制器
      </a>
      。入站流量控制器在管理员集群和用户集群的
      <code dir="ltr" translate="no">
       gke-system
      </code>
      命名空间中运行。这样可以让 Ingress 的传输层安全协议(TLS)管理更轻松。要启用 Ingress 或在升级后重新启用 Ingress，请按照
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.3/how-to/installation/install?hl=zh-cn#enabling_ingress">
       启用 Ingress
      </a>
      下的说明操作。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl
      </code>
      工具不再使用 Minikube 和 KVM 进行引导。这意味着您无需在管理员工作站虚拟机上启用嵌套虚拟化。
     </p>
    </div>
    <h3 data-text="已知问题" id="known-issues_4" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      GKE on-prem 的入站流量控制器使用 Istio 1.1，具有自动 Secret 发现功能。但是，用于 Secret 发现的节点代理可能无法在 Secret 删除后获取 Secret 更新。因此，请避免删除 Secret。如果必须删除 Secret 且 Ingress TLS 之后失败，请在 GKE 系统命名空间中手动重启 Ingress Pod。
     </p>
    </div>
    <h2 data-text="2019 年 4 月 11 日" id="april_11_2019" tabindex="0">
     2019 年 4 月 11 日
    </h2>
    <p>
     GKE On-Prem Beta 版 1.2.1 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features_6" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      GKE On-Prem 集群现在使用
      <a href="https://cloud.google.com/kubernetes-engine/connect?hl=zh-cn">
       Connect for Anthos
      </a>
      自动连接回 Google。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      现在，每个用户集群最多可以运行 3 个控制平面。
     </p>
    </div>
    <h3 data-text="更改" id="changes_6" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl
      </code>
      现在验证 vSphere 和 F5 BIG-IP 凭据创建集群。
     </p>
    </div>
    <h3 data-text="已知问题" id="known-issues_5" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      回归会导致
      <code dir="ltr" translate="no">
       gkectl diagnose snapshot
      </code>
      命令使用错误的 SSH 密钥，从而导致命令无法从用户集群中收集信息。作为支持案例的解决方法，您可能需要通过 SSH 连接到个人用户集群节点并手动收集数据。
     </p>
    </div>
    <h2 data-text="2019 年 4 月 2 日" id="april_2_2019" tabindex="0">
     2019 年 4 月 2 日
    </h2>
    <p>
     GKE On-Prem Beta 版 1.1.1 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features_7" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      您现在可以使用
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.1/how-to/installation/getting-started?hl=zh-cn#download_ova">
       开放虚拟设备（OVA）
      </a>
      安装 GKE On-Prem，这是一个包含多个命令行界面工具的预配置虚拟机映像。此更改使安装变得更轻松，并且移除了一个虚拟化层。您不再需要在 Docker 容器内运行
      <code dir="ltr" translate="no">
       gkectl
      </code>
      。
     </p>
     <p>
      如果您在 beta-1.1.1 之前安装了 GKE On-Prem 版本，则应按照文档中的说明创建一个新的管理员工作站。安装新的管理员工作站之后，将任何 SSH 密钥、配置文件、kubeconfigs 和其他任何需要的文件从以前的工作站复制到新工作站。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      添加有关
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.1/how-to/administration/backing-up?hl=zh-cn">
       备份和恢复集群
      </a>
      的文档。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      您现在可以使用 OIDC 和 ADFS 为集群配置身份验证。如需了解详情，请参阅
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.1/how-to/security/oidc-adfs?hl=zh-cn">
       使用 OIDC 和 ADFS 进行身份验证
      </a>
      和
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/concepts/authentication?hl=zh-cn">
       身份验证
      </a>
      。
     </p>
    </div>
    <h3 data-text="更改" id="changes_7" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      您现在必须使用管理员集群的私钥才能运行
      <code dir="ltr" translate="no">
       gkectl diagnose snapshot
      </code>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      在安装过程中添加了一个配置选项，用于部署多主实例用户集群。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      <a href="https://cloud.google.com/kubernetes-engine/connect?hl=zh-cn">
       Connect for Anthos 文档
      </a>
      已迁移。
     </p>
    </div>
    <h3 data-text="修复" id="fixes_1" tabindex="0">
     修复
    </h3>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      修复了在意外移除节点时集群网络可能中断的问题。
     </p>
    </div>
    <h3 data-text="已知问题" id="known-issues_6" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      GKE On-Prem 的配置管理器已从 0.11 版升级到 0.13 版。系统的多个组件已重命名。您需要采取一些步骤来清理之前版本的资源并安装新实例。
     </p>
     <p>
      如果您拥有配置管理器的有效实例：
     </p>
     <ol>
      <li>
       <p>
        卸载实例：
       </p>
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl -n=nomos-system delete nomos --all</pre>
      </li>
      <li>
       <p>
        确保实例的命名空间没有资源：
       </p>
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl -n nomos-system get all</pre>
      </li>
      <li>
       <p>
        删除命名空间：
       </p>
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl delete ns nomos-system</pre>
      </li>
      <li>
       <p>
        删除 CRD：
       </p>
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl delete crd nomos.addons.sigs.k8s.io</pre>
      </li>
      <li>
       <p>
        删除该操作的所有 kube-system 资源：
       </p>
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl -n kube-system delete all -l k8s-app=nomos-operator</pre>
      </li>
     </ol>
     <p>
      如果您没有有效的配置管理器实例，请执行以下操作：
     </p>
     <ol>
      <li>
       <p>
        删除配置管理器命名空间：
       </p>
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl delete ns nomos-system</pre>
      </li>
      <li>
       <p>
        删除 CRD：
       </p>
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl delete crd nomos.addons.sigs.k8s.io</pre>
      </li>
      <li>
       <p>
        删除该操作的所有 kube-system 资源：
       </p>
       <pre class="devsite-click-to-copy" dir="ltr" translate="no">kubectl -n kube-system delete all -l k8s-app=nomos-operator</pre>
      </li>
     </ol>
    </div>
    <h2 data-text="2019 年 3 月 12 日" id="march_12_2019" tabindex="0">
     2019 年 3 月 12 日
    </h2>
    <p>
     GKE On-Prem Beta 版 1.0.3 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="修复" id="fixes_2" tabindex="0">
     修复
    </h3>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      修复了导致 Docker 证书保存到错误位置的问题。
     </p>
    </div>
    <h2 data-text="2019 年 3 月 4 日" id="march_4_2019" tabindex="0">
     2019 年 3 月 4 日
    </h2>
    <p>
     GKE On-Prem Beta 版 1.0.2 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features_8" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      您现在可以运行
      <code dir="ltr" translate="no">
       gkectl version
      </code>
      来检查您运行的是
      <code dir="ltr" translate="no">
       gkectl
      </code>
      的哪个版本。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      您现在可以
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/beta-1.0/how-to/administration/upgrading-a-cluster?hl=zh-cn">
       将用户集群升级
      </a>
      到未来的 Beta 版。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      <a href="https://cloud.google.com/anthos-config-management/docs?hl=zh-cn">
       Anthos Config Management
      </a>
      0.11.6 版现已发布。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      现在，每个节点都会启用 Stackdriver Logging。默认情况下，日志记录代理会将日志复制到您的 GCP 项目，仅用于控制平面服务、集群 API、vSphere 控制器、Calico、BIG-IP 控制器、Envoy 代理、Connect for Anthos、Anthos Config Management、Prometheus 和 Grafana 服务、Istio 控制平面和 Docker。默认情况下，排除应用容器日志，但可以选择启用。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      Stackdriver Prometheus Sidecar 捕获与 Logging 代理相同组件的指标。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      现在支持
      <a href="https://kubernetes.io/docs/concepts/services-networking/network-policies/">
       Kubernetes 网络政策
      </a>
      。
     </p>
    </div>
    <h3 data-text="更改" id="changes_8" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      您现在可以更新集群规范中的 IP 地址块，以扩展给定集群的 IP 范围。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      如果您在 alpha 版期间安装的集群在 Beta 版之后与 Google 断开连接，则可能需要重新连接。请参阅
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/latest/how-to/installation/registering-a-user-cluster?hl=zh-cn">
       手动注册用户集群
      </a>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      已更新
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/latest/how-to/installation/getting-started?hl=zh-cn">
       使用入门
      </a>
      ，其中包括激活服务帐号和运行
      <code dir="ltr" translate="no">
       gkectl prepare
      </code>
      的步骤。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl diagnose snapshot
      </code>
      现在仅收集配置数据并排除日志。此工具用于在打开支持案例之前捕获环境的详细信息。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      支持在集群创建时为 F5 BIG-IP 配置可选的 SNAT 池名称。这可用于在
      <a class="external" href="https://clouddocs.f5.com/products/connectors/k8s-bigip-ctlr/v1.8/">
       F5 BIG-IP 控制器
      </a>
      上配置“ --vs-snat-pool-name”值。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      现在，您需要为在管理员集群中运行的插件提供 VIP。
     </p>
    </div>
    <h3 data-text="修复" id="fixes_3" tabindex="0">
     修复
    </h3>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      改进了集群大小调整操作，以防止意外删除节点。
     </p>
    </div>
    <h2 data-text="2019 年 2 月 7 日" id="february_7_2019" tabindex="0">
     2019 年 2 月 7 日
    </h2>
    <p>
     GKE On-Prem Alpha 版本 1.3 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features_9" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      在安装过程中，您现在可以提供具有
      <code dir="ltr" translate="no">
       nodeip
      </code>
      块的 YAML 文件来配置静态 IPAM。
     </p>
    </div>
    <h3 data-text="更改" id="changes_9" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      您现在需要在 vSphere Datastore 中配置一个 100GB 磁盘。GKE On-Prem 使用该磁盘来存储其一些重要数据，例如 etcd。请参阅
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/requirements?hl=zh-cn">
       系统要求
      </a>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      您现在只能为
      <code dir="ltr" translate="no">
       nodeip
      </code>
      块提供小写主机名。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      GKE On-Prem 现在强制要求用户集群具有唯一名称。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      现在，使用 mTLS 和基于角色的访问控制来保护使用 Istio 端点的指标端点和 API。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      Grafana 的外部通信已停用。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      对 Prometheus 和 Alertmanager 运行状况检查的改进。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      Prometheus 现在使用安全端口来获取指标。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      对 Grafana 信息中心进行了几项更新。
     </p>
    </div>
    <h3 data-text="已知问题" id="known-issues_7" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      如果您的 vCenter 用户帐号使用
      <code dir="ltr" translate="no">
       DOMAIN\USER
      </code>
      之类的格式，则可能需要转义反斜杠（
      <code dir="ltr" translate="no">
       DOMAIN\\USER
      </code>
      ）。在安装过程中，当提示输入用户帐户时，请务必执行此操作。
     </p>
    </div>
    <h2 data-text="2019 年 1 月 23 日" id="january_23_2019" tabindex="0">
     2019 年 1 月 23 日
    </h2>
    <p>
     GKE On-Prem Alpha 版本 1.2.1 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features_10" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      您现在可以使用
      <code dir="ltr" translate="no">
       gkectl
      </code>
      <a href="https://cloud.google.com/anthos/gke/docs/on-prem/archive/1.0/latest/how-to/administration/deleting-an-admin-cluster?hl=zh-cn">
       删除管理员集群
      </a>
      。
     </p>
     .
    </div>
    <h3 data-text="更改" id="changes_10" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl diagnose snapshot
      </code>
      命令现在允许您在捕获远程命令结果和文件的快照时指定节点。
     </p>
    </div>
    <h2 data-text="2019 年 1 月 14 日" id="january_14_2019" tabindex="0">
     2019 年 1 月 14 日
    </h2>
    <p>
     GKE On-Prem Alpha 版 1.1.2 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="新增功能" id="new-features_11" tabindex="0">
     新增功能
    </h3>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      您现在可以使用
      <code dir="ltr" translate="no">
       gkectl prepare
      </code>
      命令拉取和推送 GKE On-Prem 容器映像，该映像弃用了
      <code dir="ltr" translate="no">
       populate_registry.sh
      </code>
      脚本。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      现在，
      <code dir="ltr" translate="no">
       gkectl prepare
      </code>
      会提示您输入有关 vSphere 集群和资源池的信息。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      您现在可以使用
      <code dir="ltr" translate="no">
       gkectl create
      </code>
      命令创建用户集群并将其添加到现有的管理员控制平面，方法是在创建集群期间出现提示时传入现有 kubeconfig 文件。
     </p>
    </div>
    <div class="release-feature">
     <strong>
      FEATURE:
     </strong>
     <p>
      现在，您可以在创建集群时为管理员集群和用户集群传入 Ingress TLS Secret。您将看到以下新提示：
     </p>
     <p>
      <code dir="ltr" translate="no">
       Do you want to use TLS for Admin Control Plane/User Cluster ingress?
      </code>
     </p>
     <p>
      提供 TLS Secret 和证书可让
      <code dir="ltr" translate="no">
       gkectl
      </code>
      设置 Ingress TLS。安装 TLS 后，系统不会自动停用 HTTP。
     </p>
    </div>
    <h3 data-text="更改" id="changes_11" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      GKE On-Prem 现在运行 Kubernetes 版本
      <strong>
       1.11.2-gke.19
      </strong>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      GKE On-Prem 的默认足迹已更改：
     </p>
     <ul>
      <li>
       <p>
        用户集群节点的最低内存要求现在为 8192M。
       </p>
      </li>
     </ul>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      GKE On-Prem 现在运行 Minikube 版本
      <strong>
       0.28.0
      </strong>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      GKE 政策管理中心已升级到版本
      <strong>
       0.11.1
      </strong>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      默认情况下
      <code dir="ltr" translate="no">
       gkectl
      </code>
      不再提示您提供代理配置。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      用户集群命名空间中有三个新的 ConfigMap 资源：
      <code dir="ltr" translate="no">
       cluster-api-etcd-metrics-config
      </code>
      、
      <code dir="ltr" translate="no">
       kube-etcd-metrics-config
      </code>
      和
      <code dir="ltr" translate="no">
       kube-apiserver-config
      </code>
      。GKE On-Prem 使用这些文件快速引导指标代理容器。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      kube-apiserver 事件现在位于其自己的 etcd 中。您可以在用户集群的命名空间中看到 kube-etcd-events。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      集群 API 控制器现在使用领导者选举。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      现在从凭据文件中提取 vSphere 凭据。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl diagnose
      </code>
      命令现在可与管理员集群和用户集群配合使用。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl diagnose snapshot
      </code>
      现在可以拍摄节点上远程文件的快照、节点上远程命令的结果和 Prometheus 查询。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl diagnose snapshot
      </code>
      现在可以在多个并行线程中拍摄快照。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      <code dir="ltr" translate="no">
       gkectl diagnose snapshot
      </code>
      现在允许您指定要从快照结果中排除的字词。
     </p>
    </div>
    <h3 data-text="修复" id="fixes_4" tabindex="0">
     修复
    </h3>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      修复了导致意外网络调用的 minikube 缓存问题。
     </p>
    </div>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      修复了提取 F5 BIG-IP 凭据的问题。现在从凭据文件中读取凭据，而不是使用环境变量。
     </p>
    </div>
    <h3 data-text="已知问题" id="known-issues_8" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      运行
      <code dir="ltr" translate="no">
       gkectl prepare
      </code>
      时，您可能会遇到以下
      <a class="external" href="https://github.com/vmware/govmomi">
       <code dir="ltr" translate="no">
        govmomi
       </code>
      </a>
      警告：
     </p>
     <p>
      <code dir="ltr" translate="no">
       Warning: Line 102: Unable to parse 'enableMPTSupport' for attribute 'key' on element 'Config'
      </code>
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      调整用户集群大小可能会导致无意中删除节点或重新创建节点。
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      PersistentVolume 可能无法装载，从而产生错误
      <code dir="ltr" translate="no">
       devicePath is empty
      </code>
      。要解决此问题，请删除并重新创建关联的 PersistentVolumeClaim。
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      如果 Alpha 版不支持对节点使用静态 IP 分配，则需要调整 IPAM 地址块的大小。如需解决此问题，请考虑分配比当前所需更多的 IP 地址。
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      在网速较慢的磁盘上，虚拟机创建可能会超时并导致部署失败。如果发生这种情况，请删除所有资源，然后重试。
     </p>
    </div>
    <h2 data-text="2018 年 12 月 19 日" id="december_19_2018" tabindex="0">
     2018 年 12 月 19 日
    </h2>
    <p>
     GKE On-Prem Alpha 版 1.0.4 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="修复" id="fixes_5" tabindex="0">
     修复
    </h3>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      由
      <a class="external" href="https://github.com/kubernetes/kubernetes/issues/71411">
       CVE-2018-1002103
      </a>
      引起的漏洞已修补。
     </p>
    </div>
    <h2 data-text="2018 年 11 月 30 日" id="november_30_2018" tabindex="0">
     2018 年 11 月 30 日
    </h2>
    <p>
     GKE On-Prem Alpha 版 1.0 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="更改" id="changes_12" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      GKE On-Prem Alpha 版 1.0 运行 Kubernetes 1.11。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      GKE On-Prem 的默认足迹已更改：
     </p>
     <ul>
      <li>
       管理员控制平面运行三个节点，这些节点使用 4 个 CPU 和 16GB 内存。
      </li>
      <li>
       用户控制平面运行一个使用 4 个 CPU 16GB 内存的节点。
      </li>
      <li>
       用户集群至少运行 3 个节点，这些节点使用 4 个 CPU 和 16GB 内存。
      </li>
     </ul>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      支持高可用性 Prometheus 设置。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      支持自定义提醒 Manager 配置。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      Prometheus 已从
      <strong>
       2.3.2
      </strong>
      升级到
      <strong>
       2.4.3
      </strong>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      Grafana 从
      <strong>
       5.0.4
      </strong>
      升级到
      <strong>
       5.3.4
      </strong>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      kube-state-metrics 从
      <strong>
       1.3.1
      </strong>
      升级到
      <strong>
       1.4.0
      </strong>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      Alert Manager 从
      <strong>
       1.14.0
      </strong>
      升级到
      <strong>
       1.15.2
      </strong>
      。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      node_exporter 从
      <strong>
       1.15.2
      </strong>
      升级到
      <strong>
       1.16.0
      </strong>
      。
     </p>
    </div>
    <h3 data-text="修复" id="fixes_6" tabindex="0">
     修复
    </h3>
    <div class="release-fixed">
     <strong>
      FIXED:
     </strong>
     <p>
      由
      <a class="external" href="https://github.com/kubernetes/minikube/issues/3208">
       CVE-2018-1002103
      </a>
      引起的漏洞已修补。
     </p>
    </div>
    <h3 data-text="已知问题" id="known-issues_9" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      PersistentVolume 可能无法装载，从而产生错误
      <code dir="ltr" translate="no">
       devicePath is empty
      </code>
      。要解决此问题，请删除并重新创建关联的 PersistentVolumeClaim。
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      如果 Alpha 版不支持对节点使用静态 IP 分配，则需要调整 IPAM 地址块的大小。如需解决此问题，请考虑分配比当前所需更多的 IP 地址。
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      GKE On-Prem Alpha 版 1.0 尚未通过所有一致性测试。
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      每个管理员集群只能创建一个用户集群。要创建其他用户集群，请创建另一个管理员集群。
     </p>
    </div>
    <h2 data-text="2018 年 10 月 31 日" id="october_31_2018" tabindex="0">
     2018 年 10 月 31 日
    </h2>
    <p>
     GKE On-Prem EAP 2.1 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="更改" id="changes_13" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      当您同时创建管理员集群和用户集群时，现在可以重新使用管理员集群的 F5 BIG-IP 凭据来创建用户集群。此外，CLI 现在要求提供 BIG-IP 凭据；无法使用
      <code dir="ltr" translate="no">
       --dry-run
      </code>
      跳过此要求。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      F5 BIG-IP 控制器已升级为使用最新 OSS 版本 1.7.0。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      为了提高慢速 vSphere 机器的稳定性，现在集群机器创建超时为 15 分钟（之前为 5 分钟）。
     </p>
    </div>
    <h2 data-text="2018 年 10 月 17 日" id="october_17_2018" tabindex="0">
     2018 年 10 月 17 日
    </h2>
    <p>
     GKE On-Prem EAP 2.0 现已发布。此版本包括以下更改：
    </p>
    <h3 data-text="更改" id="changes_14" tabindex="0">
     更改
    </h3>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      支持 GKE Connect。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      支持 Monitoring。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      支持使用 private registries 进行安装。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      支持在 F5 BIG-IP 上将 L7 负载平衡器作为 L4 VIP 前端。
     </p>
    </div>
    <div class="release-changed">
     <strong>
      CHANGED:
     </strong>
     <p>
      支持在集群引导期间为节点分配静态 IP。
     </p>
    </div>
    <h3 data-text="已知问题" id="known-issues_10" tabindex="0">
     已知问题
    </h3>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      每个管理员集群只能创建一个用户集群。要创建其他用户集群，请创建另一个管理员集群。
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      EAP 2.0 不支持集群升级。
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      在网速较慢的磁盘上，虚拟机创建可能会超时并导致部署失败。如果发生这种情况，请删除所有资源，然后重试。
     </p>
    </div>
    <div class="release-issue">
     <strong>
      ISSUE:
     </strong>
     <p>
      作为集群引导过程的一部分，将运行一个短时效 minikube 实例。使用的 Minikube 版本存在安全漏洞
      <a class="external" href="https://github.com/kubernetes/minikube/issues/3208">
       CVE-2018-1002103
      </a>
      。
     </p>
    </div>
   </section>
  </div>
 </article>
</article>